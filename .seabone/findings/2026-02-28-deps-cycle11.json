[
  {
    "id": "deps-c11-1",
    "severity": "medium",
    "category": "deps",
    "file": "app/services/ecm_storage.py",
    "line": 5,
    "issue": "`from botocore.config import Config` imports directly from `botocore`, which is only a transitive dependency of boto3 and is NOT declared as a direct dependency in pyproject.toml; if boto3 changes or drops its botocore peer-dependency, this import will break without any version-controlled signal in pyproject.toml.",
    "task": "Add `botocore` as an explicit direct dependency in pyproject.toml (e.g., `botocore = \">=1.34\"`) so that its version is tracked and upgrades are intentional.",
    "auto_fixable": true,
    "effort": "trivial"
  },
  {
    "id": "deps-c11-2",
    "severity": "medium",
    "category": "deps",
    "file": "pyproject.toml",
    "line": null,
    "issue": "`python-multipart` is required by FastAPI for file upload handling (UploadFile is used in app/api/auth_flow.py) but is NOT declared as a direct runtime dependency in pyproject.toml — it is only a transitive dependency pinned at 0.0.22 in poetry.lock; pytest.ini suppresses the `PendingDeprecationWarning` it emits, masking the need to upgrade.",
    "task": "Add `python-multipart = \">=0.0.12\"` (or latest) as an explicit runtime dependency in pyproject.toml and remove the corresponding filterwarnings suppression from pytest.ini once the declared version no longer emits the warning.",
    "auto_fixable": true,
    "effort": "trivial"
  },
  {
    "id": "deps-c11-3",
    "severity": "medium",
    "category": "deps",
    "file": "pytest.ini",
    "line": 10,
    "issue": "`pytest.ini` suppresses three DeprecationWarnings rather than fixing root causes: (1) `python_multipart` import path change (undeclared dependency), (2) `'crypt' is deprecated` from passlib (still using unmaintained library with removed Python 3.13 `crypt` module), (3) `datetime.utcnow()` deprecation from internal libraries — silencing warnings hides real dependency debt.",
    "task": "Fix the root cause of each suppressed warning: declare python-multipart explicitly (deps-c11-2), migrate from passlib to argon2-cffi or pwdlib (deps-3), and update any library pinning that triggers the utcnow deprecation; then remove the filterwarnings suppressions.",
    "auto_fixable": false,
    "effort": "small"
  },
  {
    "id": "deps-c11-4",
    "severity": "medium",
    "category": "deps",
    "file": "pyproject.toml",
    "line": 9,
    "issue": "The Python version upper bound `<3.13` in pyproject.toml is a compensatory constraint added to work around passlib's dependence on the `crypt` module removed in Python 3.13; this blocks upgrading to the current stable Python 3.13 interpreter and will require continued manual constraint management as new Python versions are released.",
    "task": "Migrate from passlib to a maintained password hashing library (argon2-cffi with argon2id or pwdlib) that does not depend on the removed `crypt` module, then relax the Python version constraint to `>=3.11`.",
    "auto_fixable": false,
    "effort": "small"
  },
  {
    "id": "deps-c11-5",
    "severity": "low",
    "category": "deps",
    "file": "app/services/notification.py",
    "line": 5,
    "issue": "`from typing import List` is a legacy import on Python 3.11+; the built-in `list` is the recommended annotation type as of Python 3.9 and `typing.List` is deprecated and will eventually be removed.",
    "task": "Replace `from typing import List` with no import and change all `List[X]` annotations in `app/services/notification.py` to `list[X]` to use the Python 3.11+ built-in syntax.",
    "auto_fixable": true,
    "effort": "trivial"
  },
  {
    "id": "deps-c11-6",
    "severity": "low",
    "category": "deps",
    "file": "pyproject.toml",
    "line": 34,
    "issue": "No `boto3-stubs` type stubs are declared in `[tool.poetry.group.dev.dependencies]`; without stubs for `boto3` and `botocore`, mypy cannot type-check S3 client calls in `app/services/ecm_storage.py`, silently masking API misuse (wrong param names, wrong return types).",
    "task": "Add `boto3-stubs = {version = \"*\", extras = [\"s3\"]}` to the dev dependency group in pyproject.toml so that mypy can validate S3 client usage in ecm_storage.py.",
    "auto_fixable": true,
    "effort": "trivial"
  },
  {
    "id": "deps-c11-7",
    "severity": "low",
    "category": "deps",
    "file": "app/services/email.py",
    "line": 8,
    "issue": "`from sqlalchemy.orm import Session` is imported in `app/services/email.py` solely to type-annotate the `_db`/`db` parameter in `send_email()` and `send_password_reset_email()`, but the parameter is never used inside either function body — the session import creates a false coupling of the email service to the database layer.",
    "task": "Remove the `_db`/`db` parameter from both email functions entirely (callers pass `None`), drop the `from sqlalchemy.orm import Session` import, and update call sites to not pass a db argument.",
    "auto_fixable": false,
    "effort": "trivial"
  }
]
